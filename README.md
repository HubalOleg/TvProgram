# TvProgram

**Що зроблено:**

1. Дані загружаються асинхронно і записуються в базу даних
  * Категорії та канали: з допомогою Iterator знаходяться ключі об'єктів і вже по ключам дістаються самі об'єкти
  * телепрограма: з допомогою класу Gson JSON Streaming, дані дістаються з допомогою токенів, які перебираються в ручну(не найкращий спосіб), цей процес виконується за допомогою сервісу, який може спрацювати за запитом користувача, чи ресівера
2. Дані вигружаються з бази даних, при цьому показується ProgresDialog
3. Перевірка на стан інтернет підключення
4. Після загрузки\провірки телепрограми випригує notification
5. На головному екрані показується програма телепередач: 
 * зверху знаходиться спіннер, в якому можно вибрати день і вигрузити дані
  *програма показується за допомогою ViewPager, в якому знаходиться Fragment з RecyclerView списком
6. Бокове меню NavigationDrawer:
 * телепрограма
 * список каналів
 * категорії з переходом в список каналів вибраної категорії
 * улюблені канали 
 * для всіх списків є можливість додати\удалити канал з улюблених

**Що зроблено погано:**

1. Json займаю 39мб і щоб його розпарсити потрібно біля 13мин, думаю є кращі бібліотеки\методи ніж парсити по токенам
костиль у вигляді переходу з MainActivity в DrawerActivity, прийшлось виключити історію вікон, щоб не вертатись на пусте MainActivity
2. Якщо дані про канали не скачані, то при запуску програми без інтернет підключення апка закривається і видає Toast
3. Рідко, але буває, що у ViewPager просто не показуються дані для 2-3 фрагментів, але якшо перейти на пару елементів вперед і повернутисьдо них, то дані зявляються(не знайшов причину цьому)
4. В коді сервіс запускається тільки через кнопку в меню і там же реєструється AlarmReciever, але чомусь сервіс запускається, коли
 апка закривається

**Що не зроблено:**
 
 1. ContentProvider
 2. Сортування вкладок з каналами
 3. Якщо улюблені канали потрібно було виділяти і в списку програми, тоді це теж
 4. Синхронізація даних в базі даних
 5. Апка тестилась тільки на моєму телефоні і не впевнений, що коректно буде працювати на інших
 
**Проблеми при роботі над проектом:**

 1. Json з каналами і категоріями мають практично одну й ту ж інформацію, так і не зрозумів, чи потрібно було робити зв'язані таблиці,
  в ітозі з category.json вигрузив список категорій, що можно було впринципі і вручну добавити в програму, а channel.json розпарсив в
  базу
 2. Найбільшою проблемою було розпарсити channel.json, досвід роботи з ними був мінімальний. У більшості туторіалів вони парсяться, або через масив, якщо він є в json, або через однакові ключі. Ні того, ні іншого я не знайшов) В ітозі знайшов, що ключі можна дістати з допомогою ітератора.
 3. Інша проблема зв'язана з program.json, при спробі зробити теж саме, що з channel.json видавало помилку про нестачу пам'яті, рішенням проблеми стало читання файла в потоці Json streaming, при цьому значення дістаються по токенам і використовується невелика кілкість пам'яті
  
**Мої коментарі:**
 1. Впевнений, що спосіб з токенами далеко не найкращий, або принаймі є бібліотеки, які парсять швидше, ніж за 13 хвилин
 2. В цілому проект видався цікавим і я не очікував, що деякі речі будуть робити відразу. Спочатку я розраховував, що зроблю менше
 3. При використані кінцевої версії я не знайшов моменти на яких апка може крашнутись, але допускаю, що просто не знаю, які нюанси потрібно перевіряти
